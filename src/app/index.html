<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap-theme.css">
    <link rel="stylesheet" type="text/css" href="vendor/video-js/video-js.css">
    <link rel="stylesheet" type="text/css" href="css/app.css">
  </head>
  <body>
    <div class="main-window-region"></div>

    <script id="movie-error-tpl" type="text/x-template">
      <h2 class="error"><%= error %></h2>
    </script>

    <script id="movie-item-tpl" type="text/x-template">
        <img src="<%= image %>" class="real hidden cover" alt="<%= title %>" />
        <p class="title"><%= title %></p>
        <p class="year"><%= year %></p>
    </script>

    <script id="movie-list-tpl" type="text/x-template">
        <div class="spinner">
          <div class="spinner-image"></div>
        </div>
        <div class="movies"></div>
    </script>

    <script id="main-window-tpl" type="text/x-template">
        <header id="header"></header>
        <div id="notification"></div>
        <div id="changelog-container"></div>
        <div id="content"></div>
    </script>

    <script id="movie-browser-tpl" type="text/x-template">
        <div class="blur-header"></div>
        <div class="filter-bar-region"></div>
        <div class="movie-list-region"></div>
    </script>

    <script id="changelog-tpl" type="text/x-template">
        <a class="btn-close"><img src="/images/close.svg" width="50" /></a>
        <h1><%= title %></h1>
        <h3><%= description %></h3>
        <ul>
        <% for(var i = 0; i < changeLog.length; i++) { %>
          <li><%= changeLog[i] %></li>
        <% } %>
        </ul>
    </script>

    <script id="filter-bar-tpl" type="text/x-template">
        <ul class="nav nav-hor left">
          <li class="source active"><%= i18n.__("Movies") %></li>
          <li class="source"><%= i18n.__("TV Series") %></li>
        </ul>
        <ul class="nav nav-hor filters">
          <li class="dropdown filter genres">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
              <%= i18n.__("Genre") %><span class="value"><%= i18n.__("genre-" + genre) %></span>
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
                <% _.each(genres, function(c) { %>
                    <li><a href="#" data-value="<%= c %>"><%= i18n.__("genre-" + c) %></a></li>
                <% }); %>
            </ul>
          </li>
          <li class="dropdown filter sorters">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
              <%= i18n.__("Sort by") %><span class="value"><%= i18n.__("sort-" + sorter) %></span>
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
                <% _.each(sorters, function(c) { %>
                    <li><a href="#" data-value="<%= c %>"><%= i18n.__("sort-" + c) %></a></li>
                <% }); %>
            </ul>
          </li>
        </ul>
        <ul class="nav nav-hor right">
          <li>
            <div class="right search">
              <form><input type="text" placeholder="<%= i18n.__('Search') %>"></input></form>
            </div>
          </li>
          <li><button class="favorites"></button></li>
          <li><button class="queue"></button></li>
          <li><button class="settings"></button></li>
        </ul>
    </script>

    <script id="header-tpl" type="text/x-template">
        <nav class="btn-set <%= process.platform %>">

            <% _.each(getButtons(), function(button) { %>
                <button class="btn-os os-<%= button %>"></button>
            <% }); %>
        </nav>

        <nav class="btn-set fs-<%= process.platform %>">
            <button class="btn-os fullscreen"></button>
        </nav>
        <h1>Popcorn Time</h1>
    </script>

    <script id="sidebar-tpl" type="text/x-template">
      <div class="play">
        <div class="backdrop-image" style="background-image:url(<%= this.model.get('backdrop') %>);"></div>

        <div class="movie-detail">
          <div class="closer"><img src="images/close.svg" width="50"></div>
          <div class="poster-cont">
            <div class="poster-inner">
              <div class="poster">
            <img class="big-poster" src="<%= bigImage %>" alt="<%= title %>" />
          </div>

              <ul class="movie-config">
              <% if (this.model.get('quality') && this.model.get('torrents')) { %>
                <li class="options quality-cont">
                  <h4><%= i18n.__('quality') %></h4>
                  <% if (this.model.get('torrents')["720p"] && this.model.get('torrents')["1080p"]) { %>
                    <div class="quality switch white">
                      <input type="radio" name="switch" id="switch-off"<% if (this.model.get('quality') === '720p') { %> checked<% } %>>
                      <input type="radio" name="switch" id="switch-on"<% if (this.model.get('quality') === '1080p') { %> checked<% } %>>
                      <label for="switch-off">720p</label>
                      <label for="switch-on">1080p</label>
                      <span class="toggle"></span>
                    </div>
                  <% } else { %>
                    <span class="quality-off"><%= quality %></span>
                  <% } %>
                </li>
              <% } %>
              </ul>
            </div>
          </div>

          <div class="side-content">
            <div class="title">
              <h2><%= title %></h2>

              <ul class="movie-quick-info">
                <li>
                  <%= year %>
                </li>
                <li>
                  <% if(this.model.has('resumetime')) { %>
                    <span class="duration"><%= runtime - (resumetime/60|0) %>m left</span>
                  <% } else if (this.model.get('runtime')) { %>
                    <span class="duration"><%= runtime %> <%= i18n.__('durationUnit') %></span>
                  <% } %>
                </li>
              </ul>

              <i data-placement="left" data-toggle="tooltip" title="<%= health %> health" class="health <%= health %> fa fa-flash"></i>

              <% var p_rating = this.model.get('voteAverage') ? this.model.get('voteAverage').toFixed(1) : 0.0 %>
              <div class="rating">
                <ul class="votes" title="<%= p_rating %> / 10">
                  <% p_rating = Math.round(p_rating) / 2; // Roundoff number to nearest 0.5 %>
                  <% for (var i = 1; i <= Math.floor(p_rating); i++) { %>
                    <i class="fa fa-star"></i>
                  <% }; %>
                  <% if (p_rating % 1 > 0) { %>
                    <i class="fa fa-star-half-o"></i>
                  <% }; %>
                  <% for (var i = Math.ceil(p_rating); i < 5; i++) { %>
                    <i class="fa fa-star-o"></i>
                  <% }; %>
                </ul>
              </div>
            </div>

            <p><%= synopsis %></p>

            <div class="subtitles-list">
            <% if ( ! _.isEmpty(subtitles) ) { %>
              <h4><%= i18n.__('subtitledIn') %></h4>

              <ul>
                <% if (typeof subtitles !== 'undefined') { %>
                  <li>
                    <% for (var i = 0, keys = _.keys(subtitles), l = keys.length; i < l; ++i) { %>
                      <span class="flag flag-<%= keys[i] %>" title="<%= App.Localization.languages[keys[i]].display %>"></span>
                    <% } %>
                  </li>
                <% } %>
              </ul>
            <% } %>
            </div>

            <% if (this.model.get('torrents')) { %>
              <a href="" class="p_tooltip play-button" disabled="disabled"><%= i18n.__('watchItNow') %></a>
            <% } %>
          </div>
        </div>
      </div>
    </script>


    <!-- Basic Dependencies -->
    <script src="vendor/jquery-2.1.0.min.js"></script>
    <script src="vendor/underscore.js"></script>
    <script src="vendor/backbone-1.1.0.js"></script>
    <script src="vendor/marionette.1.6.4.js"></script>
    <script src="vendor/bootstrap-tooltip.min.js"></script>

    <!-- Settings Module and API Keys -->
    <script src="vendor/settings.js"></script>

    <!-- App Initialization -->
    <script src="app.js"></script>
    <script src="lib/config.js"></script>
    <script src="updater.js"></script>
    <script src="language.js"></script>

    <!-- UI and UI-related Initialization -->
    <script src="frontend/ui.js"></script>
    <script src="frontend/player.js"></script>

    <!-- Backbone Models -->
    <script src="lib/models/filter.js"></script>
    <script src="lib/models/movie.js"></script>
    <script src="lib/models/movie_collection.js"></script>

    <!-- Data Sources -->
    <script src="lib/cache.js"></script>
    <script src="lib/providers/cache_provider.js"></script>
    <script src="lib/providers/ysubs.js"></script>
    <script src="lib/providers/trakttv.js"></script>
    <script src="lib/providers/yts.js"></script>

    <!-- Backbone Views and Controllers -->
    <script src="lib/views/title_bar.js"></script>
    <script src="lib/views/main_window.js"></script>
    <script src="lib/views/movie_browser/movie_browser.js"></script>
    <script src="lib/views/movie_browser/filter_bar.js"></script>
    <script src="lib/views/movie_browser/movie_item.js"></script>
    <script src="lib/views/movie_browser/movie_list.js"></script>
    <script src="frontend/views/page.js"></script>
    <script src="frontend/views/listview.js"></script>
    <script src="frontend/views/movie.js"></script>
    <script src="frontend/views/sidebar.js"></script>
    <script src="frontend/controllers/home.js"></script>
    <script src="frontend/controllers/search.js"></script>
    <script src="frontend/controllers/filter.js"></script>
    <script src="frontend/router.js"></script>

    <!-- Other Dependencies -->
    <script src="vendor/bootstrap/js/bootstrap.js"></script>
    <script src="vendor/video-js/video.dev.js"></script>
    <script src="vendor/videojsplugins.js"></script>
    <script src="vendor/dragwindow.js"></script>

    <script src="bootstrap.js"></script>
  </body>
</html>
